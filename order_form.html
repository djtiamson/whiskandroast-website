<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Whisk and Roast</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <style>
          /* Sticky topbar and navbar */
    .sticky-topbar {
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 1040; /* Higher than navbar's z-index */
    }

    .sticky-navbar {
        position: fixed;
        top: 48px; /* Height of topbar */
        width: 100%;
        z-index: 1030;
    }

    /* Prevent content from being hidden behind fixed bars */
    .sticky-offset {
        padding-top: 130px; /* Adjust this based on actual height of topbar + navbar */
    }

    @media (max-width: 767.98px) {
        .sticky-navbar {
            top: 56px; /* Slightly more space for mobile toggler */
        }

        .sticky-offset {
            padding-top: 140px; /* Extra space for collapsed nav on mobile */
        }
    }

        .cart-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .cart-item img {
            width: 100px;
            height: 100px;
            margin-right: 50px;
        }
        .cart-item h6, .cart-item .price {
            margin: 10 10px;
            width: 200px;
            
        }
    </style>

</head>

<body>
   <!-- Topbar Start -->
<div class="container-fluid bg-primary py-3 sticky-topbar">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center flex-wrap flex-md-nowrap">
            <!-- Left side -->
            <div class="d-flex align-items-center text-white mb-2 mb-md-0">
                <a class="text-white pr-2" href="mailto:dannahjanelle.tiamson@tup.edu.ph">Support Team</a>
                <span class="text-white mx-2">|</span>
            </div>

            <!-- Right side -->
            <div class="d-flex align-items-center">
                <a class="text-white px-2"
                   href="https://www.facebook.com/profile.php?id=61565706737046&mibextid=ZbWKwL">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a class="text-white px-2"
                   href="https://www.instagram.com/whiskandroast?igsh=MWIwaGVxdmFtazR0bg==">
                    <i class="fab fa-instagram"></i>
                </a>
                <a id="cart-icon" class="text-white px-2" href="javascript:void(0);">
                    <i class="fas fa-shopping-cart"></i>
                </a>
            </div>
        </div>
    </div>
</div>
<!-- Topbar End -->


<!-- Font Awesome CDN (Ensure This is Included in Your Page) -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

    <!-- Navbar Start -->
    <div class="container-fluid nav-bar p-0 sticky-navbar">
        <div class="container-lg position-relative p-0 px-lg-3" style="z-index: 9;">
            <nav class="navbar navbar-expand-lg bg-white navbar-light shadow p-lg-0">
                <a href="index.html" class="navbar-brand d-block d-lg-none">
                    <h1 class="m-0 display-4 text-primary"><span class="text-secondary">Whisk</span>Roast</h1>                
                </a>
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
                    <div class="navbar-nav ml-auto py-0">
                        <a href="index.html" class="nav-item nav-link">Home</a>
                        <a href="about.html" class="nav-item nav-link">About</a>
                        <a href="product.html" class="nav-item nav-link">Products</a>
                    </div>
                    <a href="index.html" class="navbar-brand mx-5 d-none d-lg-block">
                        <img src="./home/whiskandroastlogo-nobg.png" alt="WhiskadnRoast Logo" style="max-height: 4rem; max-width: 100%;">
                    </a>
                    <div class="navbar-nav mr-auto py-0">
                        <a href="gallery.html" class="nav-item nav-link">Gallery</a>
                        <a href="ratings.html" class="nav-item nav-link">Ratings</a>
                        <a href="contact.html" class="nav-item nav-link">Contact</a>
                    </div>
                </div>
            </nav>
        </div>
    </div>
    <!-- Navbar End -->


    <!-- Header Start -->
    <div class="sticky-offset">
    <div class="jumbotron jumbotron-fluid page-header" style="margin-bottom: 90px;">
        <div class="container text-center py-5">
            <h1 class="text-white display-3 mt-lg-5">Order Summary</h1>
        </div>
        </div>
    </div>
    <!-- Header End -->


     <!-- Customer Information Start -->
     <div class="container-fluid py-5">
         <div class="row justify-content-center">
             <div class="col-lg-9">
                 <div class="contact-form bg-light rounded p-5" id="orderForm">
                     <div class="row"></div>

                     <h1>Order Summary</h1>
    <div id="cart-summary">
        <!-- Cart items will be dynamically inserted here -->
    </div>
    <p class="font-weight-bold mb-5" style="text-align-last: justify; margin-right: 145px;" id="subtotal">Subtotal: $0.00</p> <!-- Subtotal display -->
    <br>
    <h1 class="font-weight-bold mb-2">Customer Information</h1>
 <hr><br>
    <p>Before proceeding to your Order Summary and Payment, please ensure you submit your information. This step is necessary for us to accurately process your order. </p>
    <p>Rest assured, all customer information is handled with the utmost care and is securely stored in compliance with data privacy standards.</p>
    <hr>     
                     <form method="POST" id="orderForm">
                         <div class="control-group">
                             <label for="email"></label>
                             <input type="email" name="email" class="form-control p-4" id="email" placeholder="Email" required="required" />
                         </div>
     
                         <div class="control-group">
                             <label for="pnum"></label>
                             <input type="text" name="pnum" class="form-control p-4" id="pnum" placeholder="Phone Number (09 followed by 9 digits)" required="required" pattern="^\d{11}$" />
                         </div>
     
                         <div class="form-row">
                             <div class="col-sm-6 control-group">
                                 <label for="firstName"></label>
                                 <input type="text" name="firstName" class="form-control p-4" id="firstName" placeholder="First Name" required="required" pattern="^[A-Za-z\s]+$" />
                             </div>
                             <div class="col-sm-6 control-group">
                                 <label for="lastName"></label>
                                 <input type="text" name="lastName" class="form-control p-4" id="lastName" placeholder="Last Name" required="required" pattern="^[A-Za-z\s]+$" />
                             </div>
                         </div>
     
                         <div class="control-group">
                             <label for="deliveryAdd"></label>
                             <input type="text" name="deliveryAdd" class="form-control p-4" id="deliveryAdd" placeholder="Address" required="required" />
                         </div>
     
                         <div class="control-group">
                            <label for="city"></label>
                                        <select id="city" class="form-control" name="city">
                                        <option value="" disabled selected>-- Choose a city --</option>
                                        <option value="Caloocan">Caloocan</option>
                                        <option value="Las Piñas">Las Piñas</option>
                                        <option value="Mandaluyong">Mandaluyong</option>
                                        <option value="Manila">Manila</option>
                                        <option value="Malabon">Malabon</option>
                                        <option value="Marikina">Marikina</option>
                                        <option value="Muntinlupa">Muntinlupa</option>
                                        <option value="Parañaque">Parañaque</option>
                                        <option value="Pasay">Pasay</option>
                                        <option value="Pasig">Pasig</option>
                                        <option value="Quezon City">Quezon City</option>
                                        <option value="Taguig">Taguig</option>
                                        </select>
                         </div>
     
                         <div class="control-group">
                             <label for="notes">Notes</label>
                             <textarea name="notes" class="form-control p-4" rows="2" id="notes" placeholder=""></textarea>
                         </div>
     
                         <!-- Submit Button (Place Order) -->
                         <div>
                             <label></label>
                             <button class="btn btn-primary btn-block py-3 px-5" type="submit" id="submit-info">
                                 Confirm Order
                             </button>
                         </div>
     
                         <!-- Proceed to Payment button (Initially Disabled) -->
                         <div>
                             <a href="order_confirm.html"  id="proceed-order" disabled>
                               
                             </a>
                         </div>
     
                         <!-- Cancel button -->
                         <div class="control-group">
                             <div>
                                 <button class="btn btn-primary-cancel btn-block py-3 px-5" type="button" id="CancelButton" onclick="document.location='product.html'">
                                     Cancel
                                 </button>
                             </div>
                         </div>
                     </form>
                     <div id="response"></div>
                 </div>
             </div>
         </div>
     </div>
     <!-- Customer Information End -->


    <!-- Footer Start -->
    <div class="container-fluid footer bg-light py-5" style="margin-top: 90px;">
        <div class="container text-center py-5">
            <div class="row">
                <div class="col-12 mb-4">
                    <a href="index.html" class="navbar-brand m-0">
                        <h1 class="m-0 mt-n2 display-4 text-primary">Whisk <span class="text-secondary">and</span> Roast</h1>
                    </a>
                </div>
                <div class="col-12 mb-4">
                    <a class="btn btn-outline-secondary btn-social mr-2" href="https://www.facebook.com/profile.php?id=61565706737046" target="_blank">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a class="btn btn-outline-secondary btn-social" href="https://www.instagram.com/whiskandroast?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank">
                        <i class="fab fa-instagram"></i>
                    </a>
                </div>
                <div class="col-12 mt-2 mb-4">
                    <div class="row">
                        <div class="col-sm-6 text-center text-sm-right border-right mb-3 mb-sm-0">
                            <h5 class="font-weight-bold mb-2">Get In Touch</h5>
                            <p class="mb-2">Ilaya, Alabang, Muntinlupa City</p>
                            <p class="mb-0">              </p>
                        </div>
                        <div class="col-sm-6 text-center text-sm-left">
                            <h5 class="font-weight-bold mb-2">Opening Hours</h5>
                            <p class="mb-2">Our online store is open 24/7!</p>
                            <p class="mb-0">Shop anytime, anywhere.</p>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <p class="m-0">&copy; <a>Whisk and Roast</a>. All Rights Reserved.</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-secondary px-2 back-to-top"><i class="fa fa-angle-double-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/isotope/isotope.pkgd.min.js"></script>
    <script src="lib/lightbox/js/lightbox.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="mail/jqBootstrapValidation.min.js"></script>
    <script src="mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    
    <script>
        document.getElementById('orderForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent form submission

            const formData = new FormData(this);

            fetch('orderForm.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                const responseDiv = document.getElementById('response');
                if (data.success) {
                    responseDiv.innerHTML = `<p style="color: green;">${data.message}</p>`;
                } else {
                    responseDiv.innerHTML = `<p style="color: red;">${data.message}</p>`;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('response').innerHTML = '<p style="color: red;">An error occurred while submitting the form.</p>';
            });
        });
    </script>
<script>
    const orderForm = document.getElementById('orderForm');
    const proceedOrderButton = document.getElementById('proceed-order');
    const submitInfoButton = document.getElementById('submit-info');

    // Disable Proceed to Order button initially
    proceedOrderButton.setAttribute('disabled', 'disabled');
    proceedOrderButton.classList.add('btn-secondary');

    // Listen for Submit Info button click
    orderForm.addEventListener('submit', function (event) {
        event.preventDefault(); // Prevent default form submission

        // Validate form fields
        const email = document.getElementById('email').value.trim();
        const phone = document.getElementById('pnum').value.trim();
        const firstName = document.getElementById('firstName').value.trim();
        const lastName = document.getElementById('lastName').value.trim();
        const address = document.getElementById('deliveryAdd').value.trim();
        const city = document.getElementById('city').value.trim();

        if (!email || !phone || !firstName || !lastName || !address || !city) {
            alert('Please fill out all required fields before submitting.');
            return;
        }

        // Simulate successful submission
        setTimeout(() => {
            alert('Information submitted successfully!');

            // Enable Proceed to Order button
            proceedOrderButton.removeAttribute('disabled');
            proceedOrderButton.classList.remove('btn-secondary');
            proceedOrderButton.classList.add('btn-primary');
        }, 500);
    });

    // Prevent navigation if Proceed button is disabled
    proceedOrderButton.addEventListener('click', function (event) {
        if (proceedOrderButton.hasAttribute('disabled')) {
            event.preventDefault();
            alert('Please submit your information before proceeding.');
        }
    });

</script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const cartContainer = document.getElementById('cart-summary');
        const subtotalElement = document.getElementById('subtotal'); // Element to display subtotal

        // Retrieve the cart data from localStorage
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Check if the cart is empty
        if (cart.length === 0) {
            cartContainer.innerHTML = '<p>Your cart is empty.</p>';
            subtotalElement.innerHTML = 'Subtotal: ₱0.00'; // Show 0 if cart is empty
            return;
        }

        // Initialize subtotal variable
        let subtotal = 0;

        // Display each cart item
        cart.forEach((item, index) => {
            const cartItemElement = document.createElement('div');
            cartItemElement.classList.add('cart-item');
            cartItemElement.innerHTML = `
                <img src="${item.imgSrc}" alt="${item.name}">
                <h6>${item.name}</h6>
                <span class="price">${item.price}</span>
                
            `;

            cartContainer.appendChild(cartItemElement);

            // Calculate subtotal (price * quantity)
            const itemPrice = parseFloat(item.price.replace('₱', '').trim()); // Remove '₱' and parse as number
            subtotal += itemPrice ; //* item.quantity Add to subtotal
        });

     // Update the subtotal display
     updateSubtotal(cart);    

          
});

 // Function to update the cart in localStorage
 function updateCartInLocalStorage(cart) {
        localStorage.setItem('cart', JSON.stringify(cart));
    }

    // Function to update the subtotal
    function updateSubtotal(cart) {
        let subtotal = 0;

        // Recalculate subtotal
        cart.forEach(item => {
            const itemPrice = parseFloat(item.price.replace('₱', '').trim()); // Remove '$' and parse as number
            subtotal += itemPrice ; //* item.quantity Add to subtotal
        });

        // Update the subtotal element
        const subtotalElement = document.getElementById('subtotal');
        subtotalElement.innerHTML = `Subtotal: ₱${subtotal.toFixed(2)}`; // Format to two decimal places
    }



    //temp cust info
    document.getElementById('orderForm').addEventListener('submit', function (event) {
    event.preventDefault(); // Prevent the form from actually submitting

    // Get the form values
    const formData = {
        email: document.getElementById('email').value,
        pnum: document.getElementById('pnum').value,
        firstName: document.getElementById('firstName').value,
        lastName: document.getElementById('lastName').value,
        deliveryAdd: document.getElementById('deliveryAdd').value,
        city: document.getElementById('city').value,
        notes: document.getElementById('notes').value
    };

    // Store the data in sessionStorage
    sessionStorage.setItem('orderData', JSON.stringify(formData));

    // Redirect to the confirmation page
    window.location.href = 'order_confirm.html';
});
</script>



    
</body>

</html>